<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Master Admin | Live Pickup Orders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body class="bg-slate-50 p-8">
    <div class="max-w-4xl mx-auto">
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-black text-slate-800 uppercase italic">Live <span class="text-blue-600">Pickup Queue</span></h1>
            <button onclick="location.href='admin.html'" class="text-sm font-bold text-slate-500 hover:text-blue-600"><i class="fas fa-plus"></i> Back to Add Product</button>
        </header>

        <div id="order-list" class="space-y-4">
            </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBae3etr-vCLIiGSw0WLtGpfczxYzqPuIU",
            authDomain: "biritishmart-d5030.firebaseapp.com",
            projectId: "biritishmart-d5030",
            appId: "1:61858161397:web:ff77f535aafac9dee65bbc"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        db.collection("orders").orderBy("time", "desc").onSnapshot(snap => {
            const list = document.getElementById('order-list');
            list.innerHTML = "";
            snap.forEach(doc => {
                const o = doc.data();
                list.innerHTML += `
                    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex justify-between items-center animate-fade-in">
                        <div>
                            <span class="text-[10px] font-black bg-blue-100 text-blue-700 px-3 py-1 rounded-full uppercase tracking-widest">${o.token}</span>
                            <h3 class="text-lg font-bold text-slate-800 mt-2">${o.item}</h3>
                            <p class="text-sm text-slate-500">${o.price}</p>
                        </div>
                        <button onclick="completeOrder('${doc.id}')" class="bg-green-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-green-700 transition">COMPLETE</button>
                    </div>
                `;
            });
        });

        function completeOrder(id) {
            if(confirm("Saaman de diya hai? Order khatam kar dein?")) {
                db.collection("orders").document(id).delete();
            }
        }
    </script>
</body>
</html>
